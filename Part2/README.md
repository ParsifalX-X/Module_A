# **üî• –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω–æ–π IT-–∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã**

### **‚è≥ –í—Ä–µ–º–µ–Ω–Ω–æ–π –ª–∏–º–∏—Ç: 6 —á–∞—Å–æ–≤**

### **üõ†Ô∏è –ß—Ç–æ –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å?**

- –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –º–∞—à–∏–Ω—ã —Å Astra Linux, MikroTik –∏ pfSense
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞—Ç—å —Å–µ—Ç—å, DHCP, NAT, VPN, Firewall
- –í–∫–ª—é—á–∞—Ç—å –∫–æ–Ω—Ç—Ä–æ–ª—å –¥–æ—Å—Ç—É–ø–∞ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ—Ç–µ—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è (Astra, ALD, Eltex, CyberProtect)

---

# **üìå –ß–∞—Å—Ç—å 1: –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã (1 —á–∞—Å)**

## **üñ•Ô∏è 1.1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è**

–ü–µ—Ä–µ–¥ –Ω–∞—Å—Ç—Ä–æ–π–∫–æ–π –Ω—É–∂–Ω–æ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —É —Ç–µ–±—è –µ—Å—Ç—å:  
‚úÖ –ö–æ–º–ø—å—é—Ç–µ—Ä / —Å–µ—Ä–≤–µ—Ä —Å –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ–π –º–æ—â–Ω–æ—Å—Ç—å—é (8 CPU, 16GB RAM)  
‚úÖ –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π **KVM/QEMU**, **VMware ESXi** –∏–ª–∏ **VirtualBox**  
‚úÖ ISO-–æ–±—Ä–∞–∑—ã –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º

### **üìÇ 1.2. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –æ–±—Ä–∞–∑–æ–≤**

**MikroTik CHR (Cloud Hosted Router)**  
üîó [–°–∫–∞—á–∞—Ç—å —Å –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–≥–æ —Å–∞–π—Ç–∞](https://mikrotik.com/download)  
–í—ã–±–∏—Ä–∞–µ–º: **CHR RAW Disk Image**

**Astra Linux (FW1, C1, C2)**  
üîó [–°–∫–∞—á–∞—Ç—å Astra Linux](https://astralinux.ru/download/)  
–í—ã–±–∏—Ä–∞–µ–º: **Astra Linux Common Edition / Special Edition**

**pfSense (FW2, IDS/IPS)**  
üîó [–°–∫–∞—á–∞—Ç—å pfSense](https://www.pfsense.org/download/)  
–í—ã–±–∏—Ä–∞–µ–º: **ISO Installer**

---

## **üõ†Ô∏è 1.3. –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω**

### **KVM (QEMU)**

1. –°–æ–∑–¥–∞–µ–º –¥–∏—Å–∫ –¥–ª—è MikroTik CHR:

```bash
qemu-img create -f qcow2 mikrotik-chr.qcow2 512M
```

2. –ó–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É MikroTik:

```bash
qemu-system-x86_64 -hda mikrotik-chr.qcow2 -m 256 -enable-kvm -net nic -net user
```

### **VMware / VirtualBox**

1. –°–æ–∑–¥–∞–µ–º –í–ú
2. –£–∫–∞–∑—ã–≤–∞–µ–º **CPU: 2, RAM: 2GB, HDD: 10GB**
3. –ü–æ–¥–∫–ª—é—á–∞–µ–º —Å–∫–∞—á–∞–Ω–Ω—ã–π ISO
4. –ó–∞–ø—É—Å–∫–∞–µ–º —É—Å—Ç–∞–Ω–æ–≤–∫—É

---

# **üìå –ß–∞—Å—Ç—å 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ç–∏ (1.5 —á–∞—Å–∞)**

## **üåê 2.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ MikroTik (–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ DHCP)**

### **üîπ 2.1.1. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–∞–∑–æ–≤–æ–≥–æ IP**

–ó–∞—Ö–æ–¥–∏–º –≤ MikroTik:

```bash
/ip address add address=192.168.1.1/24 interface=ether1
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
/ip address print
```

–ï—Å–ª–∏ –≤–∏–¥–∏–º `192.168.1.1/24` ‚Äî –≤—Å—ë –æ–∫.

---

### **üîπ 2.1.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ DHCP**

1. –°–æ–∑–¥–∞–µ–º –ø—É–ª –∞–¥—Ä–µ—Å–æ–≤:

```bash
/ip pool add name=dhcp-pool ranges=192.168.1.10-192.168.1.200
```

2. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º DHCP-—Å–µ—Ä–≤–µ—Ä:

```bash
/ip dhcp-server add name=dhcp1 interface=ether1 address-pool=dhcp-pool disabled=no
```

3. –£–∫–∞–∑—ã–≤–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ç–∏:

```bash
/ip dhcp-server network add address=192.168.1.0/24 gateway=192.168.1.1 dns-server=8.8.8.8
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**

```bash
/ip dhcp-server lease print
```

---

### **üîπ 2.1.3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ NAT**

```bash
/ip firewall nat add chain=srcnat out-interface=ether1 action=masquerade
```

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–∞ –≤ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç:**

```bash
ping 8.8.8.8
```

–ï—Å–ª–∏ –ø–∏–Ω–≥—É–µ—Ç—Å—è ‚Äì –æ—Ç–ª–∏—á–Ω–æ, NAT —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## **üõ°Ô∏è 2.2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firewall (pfSense)**

1. –ó–∞—Ö–æ–¥–∏–º –≤ Web GUI **(https://192.168.1.2:443)**
2. –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ **Firewall ‚Üí Rules ‚Üí WAN**
3. –ù–∞–∂–∏–º–∞–µ–º **Add Rule**
4. **Protocol:** TCP
5. **Destination Port:** 22 (SSH) / 443 (Web)
6. **Action:** Pass
7. **Apply Changes**

---

# **üìå –ß–∞—Å—Ç—å 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ VPN (1.5 —á–∞—Å–∞)**

## **üîë 3.1. OpenVPN –Ω–∞ MikroTik**

1. –í–∫–ª—é—á–∞–µ–º —Å–µ—Ä–≤–µ—Ä:

```bash
/interface ovpn-server server set enabled=yes certificate=server-cert require-client-certificate=yes
```

2. –°–æ–∑–¥–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:

```bash
/ppp secret add name=vpn-user password=StrongPass service=ovpn
```

3. –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–Ω–∞ —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–∏):

```bash
/interface ovpn-client add connect-to=192.168.1.1 user=vpn-user password=StrongPass disabled=no
```

4. –ü—Ä–æ–≤–µ—Ä—è–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ:

```bash
/interface ovpn-server print
```

---

# **üìå –ß–∞—Å—Ç—å 4: –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (1.5 —á–∞—Å–∞)**

## **üö® 4.1. IDS (Intrusion Detection System)**

### **üõ†Ô∏è 4.1.1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Suricata (–Ω–∞ Astra Linux)**

```bash
apt install suricata
```

### **üìú 4.1.2. –î–æ–±–∞–≤–ª—è–µ–º –ø—Ä–∞–≤–∏–ª–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –∞—Ç–∞–∫**

```bash
echo "alert icmp any any -> any any (msg:'ICMP Packet Detected'; sid:1000001;)" >> /etc/suricata/rules/local.rules
```

### **üîÑ 4.1.3. –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ–º IDS**

```bash
systemctl restart suricata
```

---

# **üìå –ß–∞—Å—Ç—å 5: –§–∏–Ω–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ —Å–¥–∞—á–∞ (1 —á–∞—Å)**

## **üìë 5.1. –°–æ–∑–¥–∞–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏**

**–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –≤–∫–ª—é—á–∏—Ç—å –≤ –æ—Ç—á–µ—Ç:**
‚úÖ –°—Ö–µ–º—É —Å–µ—Ç–∏  
‚úÖ IP-–∞–¥—Ä–µ—Å–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–∏—Å–æ–≤  
‚úÖ –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é DHCP, NAT, VPN  
‚úÖ –°–∫—Ä–∏–Ω—à–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤

---

## **üìÇ 5.2. –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π**

**MikroTik:**

```bash
/export file=backup
```

**KVM/QEMU:**

```bash
virsh snapshot-create-as FW1 "Before Config" --description "Initial state"
```

**VMware:**

1. VM ‚Üí Snapshot ‚Üí Take Snapshot

---

## **üöÄ 5.3. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–µ—Ä–µ–¥ —Å–¥–∞—á–µ–π**

‚úÖ –ò–Ω—Ç–µ—Ä–Ω–µ—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç  
‚úÖ –†–∞–∑–¥–∞—é—Ç—Å—è IP —á–µ—Ä–µ–∑ DHCP  
‚úÖ VPN –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è  
‚úÖ IDS –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç –∞—Ç–∞–∫–∏  
‚úÖ –û—Ç—á–µ—Ç —Å–æ—Å—Ç–∞–≤–ª–µ–Ω

---
